<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë²„ìŠ¤ ê²½ë¡œ ì°¾ê¸° (ë‹¤í¬ëª¨ë“œ)</title>
    <style>
        /* 
         * [CSS ë³€ìˆ˜ ì„¤ì •]
         * ë‹¤í¬ëª¨ë“œ/ë¼ì´íŠ¸ëª¨ë“œ ìƒ‰ìƒ ê´€ë¦¬ë¥¼ ì‰½ê²Œ í•˜ê¸° ìœ„í•´ ë³€ìˆ˜ ì‚¬ìš©
         */
        :root {
            --bg-color: #f4f4f9;
            --container-bg: #ffffff;
            --text-color: #333333;
            --sub-text-color: #666666;
            --card-bg: #ffffff;
            --border-color: #eeeeee;
            --primary-color: #007bff;
            --danger-color: #d9534f;
            --shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        /* ë‹¤í¬ ëª¨ë“œ ìƒ‰ìƒ ì •ì˜ */
        body.dark-mode {
            --bg-color: #121212;
            --container-bg: #1e1e1e;
            --text-color: #e0e0e0;
            --sub-text-color: #aaaaaa;
            --card-bg: #2a2a2a;
            --border-color: #444444;
            --primary-color: #4dabf7;
            --danger-color: #ff6b6b;
            --shadow: 0 4px 10px rgba(0,0,0,0.5);
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            transition: background-color 0.3s, color 0.3s;
        }

        .container {
            background: var(--container-bg);
            width: 100%;
            max-width: 600px;
            padding: 20px;
            border-radius: 12px;
            box-shadow: var(--shadow);
            transition: background-color 0.3s;
            position: relative;
        }

        /* ë‹¤í¬ëª¨ë“œ í† ê¸€ ë²„íŠ¼ */
        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: 1px solid var(--border-color);
            border-radius: 20px;
            padding: 5px 10px;
            cursor: pointer;
            font-size: 1.2rem;
            color: var(--text-color);
        }

        h1 {
            text-align: center;
            font-size: 1.5rem;
            margin-bottom: 30px;
        }

        .search-box {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 20px;
        }

        input {
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            background-color: var(--bg-color);
            color: var(--text-color);
        }

        button.search-btn {
            padding: 12px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: opacity 0.3s;
        }
        button.search-btn:hover { opacity: 0.9; }
        
        /* ê²°ê³¼ ì˜ì—­ */
        .result-section { margin-top: 30px; }
        
        .section-title {
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 12px;
            border-left: 4px solid var(--primary-color);
            padding-left: 8px;
        }

        .card {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .bus-info { display: flex; flex-direction: column; gap: 4px; }
        
        .bus-num {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        .route-info {
            font-size: 0.9rem;
            color: var(--sub-text-color);
        }

        .time-info { text-align: right; }

        /* ê°•ì¡° í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
        .highlight-text {
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--danger-color);
        }
        
        .sub-text {
            font-size: 0.85rem;
            color: var(--sub-text-color);
            margin-top: 4px;
        }

        .badge {
            background: var(--border-color);
            color: var(--text-color);
            padding: 3px 6px;
            border-radius: 4px;
            font-size: 0.75rem;
            margin-left: 5px;
            vertical-align: middle;
        }
    </style>
</head>
<body>

<div class="container">
    <button class="theme-toggle" onclick="toggleTheme()" id="themeBtn">ğŸŒ™</button>
    <h1>ğŸš ë²„ìŠ¤ ê²½ë¡œ ê²€ìƒ‰</h1>
    
    <div class="search-box">
        <input type="text" id="startStation" placeholder="ì¶œë°œ ì •ë¥˜ì¥ (ì˜ˆ: ê°•ë‚¨ì—­)" value="ê°•ë‚¨ì—­">
        <input type="text" id="endStation" placeholder="ë„ì°© ì •ë¥˜ì¥ (ì˜ˆ: í™ëŒ€ì…êµ¬)" value="í™ëŒ€ì…êµ¬">
        <button class="search-btn" onclick="findBus()">ë²„ìŠ¤ ì°¾ê¸°</button>
    </div>

    <div id="resultArea" style="display: none;">
        <!-- 1. ëŒ€ê¸° ì‹œê°„ ì§§ì€ ìˆœ -->
        <div class="result-section">
            <div class="section-title">â³ ê³§ ì˜¤ëŠ” ë²„ìŠ¤ (ëŒ€ê¸° ì§§ì€ ìˆœ)</div>
            <div id="listByWait"></div>
        </div>

        <!-- 2. ëª©ì ì§€ ë„ì°© ë¹ ë¥¸ ìˆœ -->
        <div class="result-section">
            <div class="section-title">ğŸš€ ë¹ ë¥¸ ë„ì°© (ì´ ì†Œìš”ì‹œê°„ ìˆœ)</div>
            <div id="listByFast"></div>
        </div>
    </div>
</div>

<script>
    // [ìƒ˜í”Œ ë°ì´í„°]
    const mockBusData = [
        { busNo: "1001", start: "ê°•ë‚¨ì—­", end: "í™ëŒ€ì…êµ¬", waitTime: 3, travelTime: 60, type: "ê´‘ì—­" },
        { busNo: "402", start: "ê°•ë‚¨ì—­", end: "í™ëŒ€ì…êµ¬", waitTime: 15, travelTime: 35, type: "ê°„ì„ " },
        { busNo: "M5002", start: "ê°•ë‚¨ì—­", end: "í™ëŒ€ì…êµ¬", waitTime: 8, travelTime: 45, type: "ê´‘ì—­" },
        { busNo: "360", start: "ê°•ë‚¨ì—­", end: "í™ëŒ€ì…êµ¬", waitTime: 25, travelTime: 30, type: "ê°„ì„ " },
        { busNo: "ë§ˆì„01", start: "ì§‘ì•", end: "ì‹œì¥", waitTime: 5, travelTime: 10, type: "ë§ˆì„" }
    ];

    // ë‹¤í¬ëª¨ë“œ í† ê¸€ í•¨ìˆ˜
    function toggleTheme() {
        document.body.classList.toggle('dark-mode');
        const btn = document.getElementById('themeBtn');
        if (document.body.classList.contains('dark-mode')) {
            btn.innerText = "â˜€ï¸";
        } else {
            btn.innerText = "ğŸŒ™";
        }
    }

    // í˜„ì¬ ì‹œê°„ + ë¶„ì„ ë”í•´ì„œ '00:00' í˜•ì‹ìœ¼ë¡œ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜
    function getArrivalTimeString(minutesToAdd) {
        const now = new Date();
        const arrivalTime = new Date(now.getTime() + minutesToAdd * 60000);
        
        let hours = arrivalTime.getHours();
        let minutes = arrivalTime.getMinutes();
        
        // ë³´ê¸° ì¢‹ê²Œ 0 ì±„ìš°ê¸° (ì˜ˆ: 9ì‹œ -> 09ì‹œ)
        hours = hours < 10 ? '0' + hours : hours;
        minutes = minutes < 10 ? '0' + minutes : minutes;
        
        return `${hours}:${minutes}`;
    }

    function findBus() {
        const startInput = document.getElementById('startStation').value.trim();
        const endInput = document.getElementById('endStation').value.trim();
        const resultArea = document.getElementById('resultArea');

        if (!startInput || !endInput) {
            alert("ì¶œë°œì§€ì™€ ë„ì°©ì§€ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return;
        }

        const filteredBuses = mockBusData.filter(bus => 
            bus.start === startInput && bus.end === endInput
        );

        if (filteredBuses.length === 0) {
            alert("ê²€ìƒ‰ëœ ê²½ë¡œê°€ ì—†ìŠµë‹ˆë‹¤. (ìƒ˜í”Œ: ê°•ë‚¨ì—­ -> í™ëŒ€ì…êµ¬)");
            resultArea.style.display = 'none';
            return;
        }

        // ì •ë ¬
        const sortedByWait = [...filteredBuses].sort((a, b) => a.waitTime - b.waitTime);
        const sortedByFast = [...filteredBuses].sort((a, b) => 
            (a.waitTime + a.travelTime) - (b.waitTime + b.travelTime)
        );

        // ë Œë”ë§
        renderList('listByWait', sortedByWait, 'wait');
        renderList('listByFast', sortedByFast, 'total');
        
        resultArea.style.display = 'block';
    }

    function renderList(elementId, data, mode) {
        const container = document.getElementById(elementId);
        container.innerHTML = ""; 

        data.forEach(bus => {
            const totalTime = bus.waitTime + bus.travelTime;
            const arrivalClock = getArrivalTimeString(totalTime); // ë„ì°© ì˜ˆì • ì‹œê° ê³„ì‚°
            
            let html = `
                <div class="card">
                    <div class="bus-info">
                        <div class="bus-num">${bus.busNo} <span class="badge">${bus.type}</span></div>
                        <div class="route-info">${bus.start} â¡ ${bus.end}</div>
                    </div>
                    <div class="time-info">
            `;

            // ëª¨ë“œì— ë”°ë¼ í‘œì‹œ ë‚´ìš© ë¶„ê¸°
            if (mode === 'wait') {
                // ëŒ€ê¸° ì‹œê°„ ì¤‘ì‹¬ í‘œì‹œ
                html += `
                    <div class="highlight-text">${bus.waitTime}ë¶„ í›„ ë„ì°©</div>
                    <div class="sub-text">ì´ ${totalTime}ë¶„ ì†Œìš”</div>
                `;
            } else {
                // ë¹ ë¥¸ ë„ì°© ì¤‘ì‹¬ í‘œì‹œ (ìš”ì²­ì‚¬í•­: ë„ì°© ì‹œê°„ í‘œê¸°)
                html += `
                    <div class="highlight-text">${arrivalClock} ë„ì°©</div>
                    <div class="sub-text">ì´ ${totalTime}ë¶„ (ëŒ€ê¸° ${bus.waitTime}ë¶„)</div>
                `;
            }

            html += `</div></div>`;
            container.innerHTML += html;
        });
    }
</script>

</body>
</html>
